# 数据模型

在数据库中用数据模型这个工具来抽象、表示和处理现实世界中的数据和信息。数据模型是现实世界数据特征的抽象。

数据模型是现实世界数据特征的抽象，根据模型应用的不同目的，数据模型分为两类：
- 概念模型：也称为信息模型。它是按用户的观点来对数据和信息建模，主要用于数据库设计。
- 数据模型：
	- **逻辑**数据模型：主要包括网络模型、层次模型、关系模型、面向对象模型，对象关系模型等。
	- **物理**数据模型：对数据最低层次的抽象，它描述数据在系统内部的表示方法和存取方法，在磁盘或磁带上的存储方式和存取方式。

> [!note] 数据模型(广义)是数据研究的一个核心问题。
> - 为了便于设计数据模型，常先将现实世界抽象为一种**概念模型**，然后再将概念模型转换为特定的数据模型。
> - 每个 DBMS 都是基于某种**数据模型**(狭义)的，传统的数据模型包括：层次模型、网状模型和关系模型。

## E-R概念模型

### 概念模型的用途

用于信息世界的建模，现实世界到机器世界的一个中间层次，是设计数据库的有效武器，数据库设计人员与用户之间的进行交流的语言（面向用户）

### 概念模型的基本要求

* 较强的语义表达能力，可以方便、直接的表达应用中的各种语义知识
* 简单、清晰、易于用户理解

### E-R概念模型的基本概念

#### 1. 实体

* 客观存在并可以相互区别的事物称为**实体**。
* 可以是具体的对象，如一本书。

#### 2. 属性

* 实体所具有的某一特征称为**属性。**
* 一个实体可以由若干属性来刻画，如书的重量、类型、价格。
* 属性有类型与值之分：
  * 类型：属性名，如价格，名字
  * 值：具体的内容，如100$，《数据库原理》

#### 3. 联系

* 在信息世界中将被抽象为实体内部的联系和实体之间的联系
  * 实体内部的联系：指组成实体的各个属性的联系
  * 实体之间的联系：指不同实体集之间的联系
* 联系分为三种：1:1联系，1:n联系，m:n联系
  * 一对一联系：实体集A中的一个实体**至多**与实体集B中的一个实体相对应，反之亦然。
    * 至多：可以没有，但不能超过1个
    * 例如：班级中的班长
  * 一对多联系：实体集A中的一个实体与实际集B中的多个实体相对应，反之亦然。
  * 多对多联系：实体集A中的一个实体与实体集B中的多个实体相对应，反之亦然。
    * 例如：学生与课程
* 多个实体集之间也可以存在有联系，称为多元联系
* 实体集内部不同的实体之间也存在联系

### ER-数据模型

实体-联系方法：
* 用E-R图来描述现实世界的数据的概念模型，E-R方法也成为E-R模型
* E-R图的三个基本成分：
  * **实体**：用矩形表示，框内写实体名
  * **属性**：用椭圆形表示，用属性名标注，并将椭圆形框用无向边与实体或者联系连接
  * **联系**：用菱形框表示，框内标明联系名，分别用连线将关联的实体连接起来，在连线旁标明实体间联系的类型
    * E-R模型中实体间的联系提供了较多语义
      * 基数比约束：如在二元联系中有1:1，1:n，m:n的联系
      * 参与约束：根据实体集中的实体是否全部参与联系来描述实体参与联系的约束
        * 一个实体集中的所有实体都参与联系称为完全参与，否则，称为部分参与
      * 实体参与度：实体参与联系的最小与最大次数
  * 弱实体：用双矩形框表示，为了表示全部参与，与菱形框间用双线连接。
    * 一种特殊的实体，这种实体的存在是依赖于其他实体而存在的。
  * 子类实体：一个实体集是具有共同特性的一类实体的集合，但有时需要将实体集根据个体的不同特性分为多个子集
    * 子类：较小的类：如职工
    * 超类：较大的类：如职工可以分为教师、保洁

E-R模型被广泛地用于数据库概念模型的设计
* 在E-R图中仅表示显示世界中的信息结构及信息间的关系
* 只要用户的需求不变，E-R模型是稳定的

## 层次数据模型

层次模型是数据库系统中最早出现的数据模型。

> 层次数据模型用树型结构表示了各类实体以及实体间的联系。

满足下面两个条件的基本层次联系的集合为层次模型：
* 有且只有一个节点没有双亲节点，这个节点被称为根节点
* 根以外的其它结点有且只有一个双亲结点

### 层次模型的优点：

* 数据结构比较简单，清晰
* 层次数据库的查询效率高
* 它提供了良好的数据完整性支持

### 层次模型的缺点：

* 不能直接表示两个以上的实体型间的复杂的联系和实体型简的多对多联系，只能通过引入冗余数据或者创建虚拟节点的方法来解决，易产生不一致性
* 对数据的插入和删除的操作限制太多
* 查询子女节点必须通过双亲节点
* 由于结构严密，层次命令趋于程序化

## 网状数据模型

满足下面两个条件的基本层次联系的集合称为网状模型：
* 允许一个以上的节点无双亲
* 一个节点可以有多于一个的双亲

优点：
* 能够更为直接的描绘现实世界
* 用指针实现数据间的联系，具有良好的性能，存取效率较高

缺点：
* 结构比较复杂
* 其DDl与DML较为复杂

## 关系数据模型

在 [[数据库/关系数据库|关系数据模型]] 中，基本数据结构被限制为二维表，一张二维表被称为一个关系

### 关系

#### (1). 关系

关系是一张二维表，由多个行和列组成的，一个关系可以用来描述一个实体集

#### (2). 属性

一个关系有多个列，每一列为关系的一个属性

#### (3). 域

一个属性对应一个值的集合。域是属性的取值范围

#### (4). 元组

* 关系是元组的集合，一个元组对应一个实体集中的一个个体。
* 一个元组由若干个分量组成，一个分量对应一个属性值。

#### (5). 键

* 键是一个或多个属性组成的，能够唯一标识一个元组。
* 以个关系中可能有多组属性能够起到标识元组的作用，因而，一个关系可以有多个键，此时我们选择一个作为主键，其余为候选键。

### 2. 关系模式

* 对关系结构的描述称为关系模式
  * 可以描述如下：
    * 关系名（属性名1， 属性名2，......，属性名n）
  * 关系数据库模式是一组关系模式的集合，这组关系模式对应的关系的集合称为关系数据库
* 关系模型中基本的数据结构是：关系
* 关系必须是规范化，满足一定的关系条件，如最基本的关系条件为 关系的每一个分量必须是一个不可分的数据项
* 关系模型的数据完整性约束
  * 为了维护数据库中的数据与显示世界的一致性，需要对数据施加一定的约束条件
  * 实体完整性，参照完整性，用户自定义完整性
* 关系模型中的数据操作
  * 关系模型中，对关系中的数据可进行查询、插入、删除和修改操作
* 关系模型优点：
  1. 数据结构简单
  2. 一体化的数据子语言
  3. 数据独立性高
  4. 面向集合的存取方式
  5. 坚实的理论基础
  6. 有利于开展其他应用

### 3. 面向对象数据模型

* 对象关系数据库系统 是面向对象数据模型和关系数据模型相结合的产物

#### 1. 对象

* 定义：对象是由一组数据结构和数据结构上的操作的程序代码封装起来的基本单位
* 组成部分
  * 属性集合
    * 属性描述对象的状态、组成和特性
  * 方法集合
    * 描述了对象的行为特性

#### 2. 对象标识

* 概念：面向对象数据库中的每个对象都有唯一的不变的标识称为对象标识
* 特定：
  * 永久持续性
  * 独立与值的、系统全局唯一的

#### 3. 封装

* 每个对象是其状态与行为的封装
* 封装是对象的外部界面与内部实现之间实行清晰隔离的一种抽象，外部与对象的通信只能通过消息
* 对象封装之后查询属性值必须通过调用方法

#### 4. 类

* 对象类：共享同样属性和方法集的所有对象构成了一个对象类
