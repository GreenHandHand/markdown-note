---
tags:
  - 设计模式
  - 创建型模式
  - todo
aliases:
  - 建造者模式
  - Builder
---

# 生成器

> [!definition|Definition] 生成器
> 生成器使得你能够分步骤创建复杂对象。该模式允许你使用相同的创建代码生成不同类型和形式的对象。

![[Assets/生成器.png]]

## 核心思想

生成器模式让你可以分步骤创建复杂对象，不允许其他对象访问正在创建中的产品。

## 结构

1. **生成器 (Builder)**：
	- 该接口声明在所有类型生成器中通用的产品构造步骤。
2. **具体生成器 (Concrete Builders)**：
	- 提供构造过程的不同实现。
	- 具体生成器也可以构造不遵循通用接口的产品。
3. **产品 (Products)**
	- 最终生成的对象。
	- 由不同生成器构造的产品无需属于同一类层次结构或接口。
4. **主管 (Director)**
	- 定义调用构造步骤的顺序，这样就可以创建和复用特定的产品配置。
5. **客户端 (Client)**
	- 必须将某个生成器对象与主管类关联。一般情况下，你只需要通过主管类构造函数的参数进行一次性关联即可。以后主管类就能使用生成器对象完成后续所有的构造任务。
	- 在客户端将生成器对象传递给主管类制造方法时，还可以使用主管类来每次使用不同的生成器。

## 使用场景

- ✅ 使用生成器模式可以避免**重叠构造函数**的出现。
- ✅ 如果你需要创建的各种形式的产品，他们的制造过程相似且仅有细节上的差异，可以使用生成器模式。
- ✅ 使用生成器构造组合树或其他复杂对象。

> [!note]
> 生成器在执行制造步骤时，不能对外发布未完成的产品。这样可以避免客户端代码获取到不完整结果对象的情况。

## 实现步骤

1. 清晰地定义通用步骤，确保他们可以制造所有形式的产品。否则你将无法进一步实施该模式。
2. 在基本生成器接口中声明这些步骤。
3. 为每个形式的产品创建具体生成器类，并实现其构造。
4. 考虑创建主管类。它可以使用同一生成器对象来封装多种构造产品的方式。
5. 客户端代码会同时创建生成器和主管对象。
6. 只有在所有产品都遵循相同接口的情况下，构造结果可以直接通过主管类获取。否则，客户端应通过生成器获取构造结果。

## ✔️ 优点

- **分步创建**
    - 可以分步创建对象，暂缓创建步骤或递归运行创建步骤。
- **复用代码**
    - 生成不同形式的产品时，你可以复用相同的制造代码。
- [[00_Inbox/设计模式/软件设计原则#单一职责原则|单一职责原则]]
    - 你可以将复杂构造代码从产品的业务逻辑中分离出来。

## ✖️ 缺点

- **类数量增加**
    - 由于该模式需要新增多个类，因此代码整体复杂度会有所增加。

