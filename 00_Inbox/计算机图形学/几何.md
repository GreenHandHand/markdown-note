---
tags:
  - 计算机图形学
---

# 几何

 几何 (*Geometry*) 是计算机图形学的一个方向，研究如何在计算机中表示各种各样的几何体。

## 隐式表示与显式表示

 在计算机图形学中，几何主要有两种表示方式：
 1. 隐式表示 (*Implicit*)：没有通过参数直接定义，而是通过方程、函数来定义。例如代数曲面 (*algebraic surface*)、距离函数 (*distance functions*)。
 2. 显式表示 (*explicit*)：通过具体的参数来控制图形的生成。例如网格 (*mesh*)、点云 (*point cloud*) 等。

两种表示方式在不同的任务上的性能不同。例如使用方程进行隐式表示时，我们可以便捷地计算出一个点与该方程的相对位置。使用显式表示时，就难以计算出它们之间的相对位置。我们需要根据任务的类型选择适当的表示方式。

### 隐式表示

下面是一些常见的隐式表示方式。

1. 代数曲面 (*algebraic surface*)：使用一个 `x, y, z` 多项式的零集表示一个曲面，即 $G(x, y, z) = 0$。对于一些基本几何体，该方法直观有效，但是无法对于一些非基本几何体，复杂度过高。
2. 构造立体几何 (*Constructive Solid Geometry*)：使用基本代数曲面的组合表示不同的几何体。即将一个几何体看作几何，使用简单的几何体的交、并、补来表示复杂几何。
3. 距离函数 (*Distance function*)：使用距离函数来表示一个几何体。类似于代数曲面的表示方式，但是划定一个阈值，高于阈值的部分表示几何体的内部，低于阈值的部分表示几何体的外部。在实际应用中，一个合适的距离函数可以平滑地融合两个几何体的边界。
4. 水平集 (*Level set*)：封闭函数在描述复杂物体时非常困难，水平集通过描述一个网格来模拟封闭函数的采样。通过在网格的每一个点上都定义一个值，我们可以使用与代数曲面类似的方法表示一个几何体。
5. 分形几何 (*Fractal*)：分形几何是数学的一个分支，用于描述自相似的几何结构。

> [!note] 隐式表示方式的优缺点
> - 优点：
> 	- 简短的表示方式：例如只需要一个方程。
> 	- 利用相对位置的计算：可以方便的计算距离、相对位置。
> 	- 便于计算光线相交，便于光线追踪计算。
> 	- 对于简单的几何体，描述精确、不存在误差。
> 	- 易于处理拓扑结构的变换。
> - 缺点：
> 	- 难以处理复杂的几何形状。

### 显式表示

显式表示方式主要包含下面的几种。

1. 点云 (*point cloud*)：点云是一种比较基本的表示方式。它使用大量的点来表示各种结构，每个点都有自己的位置、颜色等。点云只能在点的数量远大于像素数量时才能正确表示物体，且对于采样不足的区域难以绘制。
2. 多边形网格 (*Polygon Mesh*)：现代计算机图形学中大量运用了多边形网格，这是最基本的表示方式之一。我们存储多边形的顶点 (通常是三角形或者四边形) 或者平面信息。

> [!note] Wavefront object 文件 (`.obj`)
> 在图形学中比较常见的一种格式。通过使用文本描述一系列的顶点、法线、贴图坐标和这些顶点的连接来表述几何体。

## 曲线

曲线广泛应用于计算机中的路径绘制、动画制作、文字渲染等方面。曲线绘制的目标是可控地绘制出平滑、自然的连续曲线。

### 贝塞尔曲线

贝塞尔曲线是计算机图形学中的一种重要曲线。贝塞尔曲线是一种显式描述，使用几个特殊的锚点来

贝塞尔曲线描述从起点到终点的一条平滑曲线。对于最简单的情况，使用两个控制点，称为线性贝塞尔曲线，使用参数方程表示为：
$$
B(t)=(1-t)P_{0} + tP_{1}\quad t\in[0, 1]
$$
即表示一条线段 $P_{0}P_{1}$。从几何上来看，就是下面的样子：

![线性贝塞尔曲线](https://upload.wikimedia.org/wikipedia/commons/0/00/Bézier_1_big.gif)

使用三个控制点的贝塞尔曲线称为二阶贝塞尔曲线，它由三个控制点，通过先描述两条线性贝塞尔曲线，然后再由两条线性贝塞尔曲线上的点描述二阶贝塞尔曲线。使用参数方程表示为：
$$
B(t) = (1-t)^{2}P_{0} + 2(1-t)tP_{1} + t^{2}P_{2}\quad t\in[0, 1]
$$

![二阶贝塞尔曲线](https://upload.wikimedia.org/wikipedia/commons/3/3d/Bézier_2_big.gif)

使用四个控制点的贝塞尔曲线称为三阶贝塞尔曲线。与二阶类似，通过先描述三条线性贝塞尔曲线，在描述两条二阶贝塞尔曲线，最后描述一条三阶贝塞尔曲线。使用参数方程表示为：
$$
B(t) = (1-t)^{3}P_{0} + 3(1-t)^{2}tP_{1} + 3(1-t)t^{2}P_{2} + t^{3}P_{3}
$$

![三阶贝塞尔曲线](https://upload.wikimedia.org/wikipedia/commons/d/db/Bézier_3_big.gif)

> [!note] 高阶贝塞尔曲线
> 高阶贝塞尔曲线使用参数方程：
> $$
> B_{n}(t) = \sum\limits_{i=0}^{n}\begin{pmatrix} n \\ i \end{pmatrix} (1-t)^{i}t^{n-i}P_{i}
> $$
> 从几何上来看，就是从 $n+1$ 个点开始，不断使用参数 $t$ 插值直到剩下一个点时，该点在 $t=0\to 1$ 变化时的轨迹。

> [!note] 贝塞尔曲线的性质
> 1. 贝塞尔曲线一定过起点与终点。
> 2. 贝塞尔曲线在起点与终点的斜率固定：$b'_{0}=3(b_{1}-b_{0}),b_{n-1}'=3(b_{n}-b_{n-1})$
> 3. 可以通过调整控制点来调整曲线形状。
> 4. 贝塞尔曲线一定位于控制点形成的凸包中。

### 分片贝塞尔曲线

高阶的贝塞尔曲线计算量大，且不容易调整局部的曲线，因此在现实中我们更加常用的是多段的贝塞尔曲线 (picewise Bézier Curves)。一般而言，我们使用三阶贝塞尔曲线描述一个曲线片段，于是可以通过拖动控制点的方式进行高效的人机交互。

![[Assets/几何.png]]

对于四阶贝塞尔曲线而言，除了起始点和终点外，还有两个控制点用于控制曲线的形状。对于连接的贝塞尔曲线，直到前一个的起点与后一个的终点相连接，那么就可以得到一段连续的曲线。如果在连接处，控制点等大反向，那么就可以得到导数连续的曲线。

> [!note] 其他曲线
> 除了贝塞尔曲线外，计算机图形学中还有一种应用广泛的曲线，称为样条曲线。最出名的样条曲线是 B- 样条曲线，这种曲线会以一种特定的方式经过所有给定的点，使用复杂的基函数表示。B- 样条曲线满足所有贝塞尔曲线的重要特征。

## 曲面

计算机图形学中对曲线的描述最常用的是使用多个三角形、四边形平面表述。除了这种近似的方式，也可以通过贝塞尔曲面进行表述。

### 贝塞尔曲面

贝塞尔曲面是对贝塞尔曲线的推广。它同样使用控制点进行控制，但是给定的控制点在三维空间中。我们首先会将其分为两个方向，