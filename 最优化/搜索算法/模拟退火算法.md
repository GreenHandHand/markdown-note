---
tags:
  - 最优化
  - 搜索算法
---

# 模拟退火算法

（原始）[[登山搜索]] 只考虑最优化目标函数的方向，容易陷入局部最优，虽然人们通过引入随机性发展出了随机登山搜索以跳出局部最优，但是却存在跳出全局最优问题。模拟退火算法通过在迭代过程中动态调整选择邻域的概率来解决 [[登山搜索]] 存在的问题。

## 模拟退火算法

***模拟退火算法***是由物理退火算法启发而来，属于现代数值优化算法。
* 在引入随机性的同时，随着迭代次数改变动态调整随机性。

### 物理退火过程

将金属加热到高温，再将其缓慢冷却。退火过程中，温度高时，原子活跃度高；温度低时，原子活跃度低。

### 模拟退火过程

模拟物理退火过程，根据温度的变化调整用邻域解代替当前解的概率
* 温度高时，随机性高：更接纳领域解，即使质量较差
* 温度低时，随机性低：趋向于只接纳质量较好的邻域解
* 温度降为0时，停止搜索，结束算法。

### 算法过程

![[Pasted image 20230330154207.png]]
**可以理论证明，在满足一系列条件时，当T趋近于0时，$x_{current}$能收敛到全局最优解**

### 参数设定

在模拟退火算法中，有一些值需要人为的设置。

#### 一、起始温度

起始温度需要一个比较高的温度以使得所有的比当前解差的邻域解都能以一个足够高的概率（如0.98）被接纳。一般而言，取
$$T_0=\frac{-所有下山跳变的质量下降程度的平均值}{\ln(需要达到的概率)}$$
在实际使用中，我们可以从小到大尝试不同的起始值，观察在起始温度下邻域解被接纳的比例，选择使接纳（接近1）比例较大的初始值。

#### 二、降温过程

降温过程要求降温缓慢，一般有下面的几种要求：

##### （1）温度取值

常见几何递减：$T_k=T_0\alpha^k$（$\alpha$ 一般取0.8到0.99之间），另外还有线性、对数递减等不同的选择

##### （2）每个温度下执行的次数（每个温度下不止一次跳变）

尽量确保在每个温度下，当前解的邻域解大多能被随机选到

#### 三、结束条件

理论上温度降为0，但是实际可能需要时间过长，且早已达到理想的解，所以可以选择其他的条件作为退出条件，这里列出一些：
* 如果连续不接纳领域解的次数超出限制
* 如果最近若干解的质量的平均值几乎不再上升
* accptance ratio（即接纳领域解次数/总尝试次数）低于一定值