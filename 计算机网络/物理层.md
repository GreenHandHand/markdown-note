---
tags:
  - 计算机网络
---

# 物理层

物理层主要研究以下内容：
1. 通信链路与通信节点的连接需要一些电路接口，物理层规定了这些接口的一些参数，如机械形状和尺寸、交换电路的数量和排列等，*例如笔记本电脑上的网线接口*。
2. 物理层规定了通信链路上所传输的信号的意义和电气特征。*例如，若规定信号 X 代表数字 0，则当节点传输 0 时就发出信息 X，而当节点接收到信号 X 时就知道收到的是 0*。

## 基本概念

### 数据、信号、码元

通信的目的是传输信息，如文字、图像和视频等。**数据**是指传送信息的实体，**信息**则是数据的电气或电磁表现，是数据在传输过程中的存在形式。数据和信号都有模拟和数字之分：
- 模拟数据(信号)的取指是连续的。
- 数字数据(信号)的取指是离散的。

在通信系统中，常用一个固定时长的信号波形表示一位 $k$ 进制数字，==代表不同离散数值的基本波形就称为**码元**==。码元是数字通信中数字信号的计量单位，这个时长内的信号称为 $k$ 进制码元，而该时长就称为码元宽度。

> [!note] 1 码元可以携带若干比特的信息量，在使用二进制编码时，只有两种不同的码元。

### 信源、信道、信宿

数据通信系统主要划分为==信源、信道和信宿==三部分。发送端信源发出的信息需要通过变换器转换成合适在信道上传输的信号，而通过信道传输到接收端的信息首先由反变换器转换成原始信号，然后发送给信宿。
- **信源**：产生和发送数据的源头。
- **信宿**：接收数据的终点，它们通常是计算机或其他数字终端设备。
- **信道**：信息的传输介质，一条双向通信的线路包含一个发送信道和一个接收信道。
- 噪声源：指信道上的噪声及分散在通信系统其他各处的噪声的集中表示。

> [!example] 通信系统模型
> ![[image/物理层-1.png]]

> [!note] 信道的分类
> - 信道按照传输信号形式的不同，可以分为模拟信道和数字信道。按照传输介质的不同，可以分为无线信道和有限信道。
> - 信道上传输的信号由基带信号和带宽信号之分。
> 	- **基带信号**：首先将数字信号 1 和 0 直接用两种不同的电压表示，然后送到数字信道上传输。这种传输方式称为基带传输。
> 	- **宽带信号**：首先将基带信号进行调频，形成频分复用模拟信号，然后送到模拟信道上传输。这种传输方式称为宽带传输。
> - 数据传输方式分为串行传输和并行传输。
> 	- **串行传输**：逐比特位按序依次传输。适合长距离通信，例如计算机网络。
> 	- **并行传输**：若干比特通过多个通信信道同时传输。适合近距离通信，常用于计算机内部。
> - 从通信双方信息的交互方式来看，可以分为三种基本方式：
> 	- **单向通信**：只有一个方向的通信，没有反方向的交互。*如无线电广播、电视广播*。
> 	- **半双工通信**：通信双方都可以发送或接收信息，但是任何一方不能同时发送和接收信息。
> 	- **全双工通信**：通信双方可同时发送和接收信息。
> 	- 单向通信只需要一个信道，而双工通信需要两个信道，每个方向一个信道。

^1

### 速率、波特、带宽

速率是指数据传输速率，表示单位时间内传输的数据量。常用两种描述方式：
- **码元传输速率**，又称为**波特率**。表示单位时间内数字通信系统所传输的码元数^[也称为**调制速率**或**符号速率**],单位是**波特**(Baud)，即码元/秒。
	- 1 波特表示数字通信系统每秒传输 1 个码元。
	- 码元既可以是多进制的，又可以是二进制的，码元速率与进制数无关。
- **信息传输速率**，又称为**比特率**。表示单位时间内数字通信系统传输的二进制码元数^[即比特数]，单位是 b/s。
- **带宽**，又称为**频率带宽**。表示某个信道所能传输信号的频率范围，即最高频率与最低频率之差，单位是 Hz。在计算机网络中，带宽用来表示网络的通信线路所能传输数据的能力，即最高数据速率，单位是 b/s。

> [!note]
> 波特和比特是两个不同的概念，但是波特率和比特率在数量上有一定的关系。若一个码元携带 $n$ 比特的信息量，则波特率 M 波特对应比特率为 Mn 比特/秒。

## 信道的极限容量

任何实际的信道都不是理想的，信息在信道上传输时会不可避免地产生失真。但是，只要接收端能够从失真的信号波形中识别出原来的信号，这种失真对通信质量就没有影响。码元的传输速率越高，或者信号的传输距离越远，或者噪声干扰越大，或者传输介质越差，接收端的波形失真就越严重。

### 奈奎特斯定理

具体的信道所能通过的频率范围总是有限的。信号中的许多高频分量往往不能通过信道，否则在传输中就会衰减，导致接收端收到的信号波形就失去码元之间的清晰界限，这种现象称为**码间串扰**。

那奎特斯定理规定，在理想低通^[没有噪声、带宽有限]的信道中，为了避免码间串扰，极限码元传输速率为 $2W$ 波特，其中 $W$ 是信道的频率带宽，单位为 Hz。若用 $V$ 表示每个码元的离散电平数目^[码元的离散电平数目是指有多少种不同的码元，若有 16 种不同的码元，则需要 4 个二进制位，因此数据传输速率是码元传输速率的 4 倍]，则极限数据率为
$$
v_{\max}=2W\log_{2}V\quad(b/s)
$$

> [!note]
> 1. 在任何信道中，码元传输速率是有上限的。若传输速率超过上限，则会出现严重的码间串扰问题，使得接收端不可能完全正确地识别码元。
> 2. 信道的频带越宽(即通过的信号高频分量越多)，就越可用更高的速率有效地传输码元。
> 3. 奈氏准则给出了码元传输速率的限制，但并未限制信息传输速率，即未对一个码元可以对应多个个二进制位给出限制。因此，==要提高数据传输速率，就要设法使每个码元携带更多比特的信息量==，此时需要采用多元制的调制方法。

### 香农定理

实际的信道会有噪声，噪声是随机产生的。香农定理给出了==带宽受限且有高斯噪声干扰的信道==的极限数据传输速率，当用该速率传输数据时，不会产生误差。香农定理定义为
$$
v_{\max}=W\log_{2}(1+S/N)\quad(\text{b/s})
$$
其中，$W$ 为信道的频率带宽(Hz)，$S$ 为信道内所传输信号的平均功率，$N$ 为信道内的高斯噪声功率，$S/N$ 为信噪比。

> [!tip] 信噪比 dB
> 这里的信噪比指信号的功率与噪声功率的比值，是一个没有单位的量。而在现实中，信号的功率往往比噪声的功率大得多，导致信噪比总是一个很大的数字，因此也常使用分贝来表示信噪比，它们之间有如下关系：
> $$
1 \text{dB}=10\log_{10}\dfrac{S}{N}
> $$
> 在香农定理中，我们使用的是无单位记法，因此在遇到以 dB 为单位表示的信噪比时，需要进行转换。

> [!note]
> 1. 信道的带宽或信道中的信噪比越大，信息的极限传输速率越高。
> 2. 对一定的传输带宽和一定的信噪比，信息的传输速率的上限是确定的。
> 3. 只要信息传输速率低于信道的极限传输速率，就能找到某种方法实现无差错的传输。
> 4. 香农定理得出的是极限信息传输速率，实际信道能达到的传输速率要比它低。

> [!tip]
> 奈氏准则只考虑带宽与极限码元传输速率之间的关系，而香农定理不仅考虑了带宽，也考虑了信噪比。

## 调制与编码

信号是数据的具体表示形式，数据无论是数字的还是模拟的，为了传输的目的，都要转换成信号。将数据转换为模拟信号的功能称为**调制**，将数据转换为数字信号的过程称为**编码**。

数字数据可以通过数字发送器转换为数字信号传输，也可以通过调制器转换为模拟信号传输。模拟数据可以通过 PCM 编码器可以转换为数字信号传输，也可以通过放大器调制器转换成模拟信号传输。这样，就形成了 4 中编码与调制方式。

### 数字数据编码为数字信号

数字数据编码用于[[#^1|基带传输]]中，即在基本不改变数字数据信号频率的情况下，直接传输数字信号。具体用什么样的数字信号表示 0 及用什么样的数字信号表示 1，就是所谓的**编码**。编码的规则有很多，只要能有效区分 0 和 1 即可。常用的数字数据编码有以下几种：
1. **归零编码**(RZ)：用高电平表示 1，低电平表示 0，或者相反。每个码元的中间均跳变到零电平，接收方根据该跳变调整本方时钟基准，这就为收发双发提供了同步机制。由于归零需要占用一定的带宽，因此传输的效率受到一定的影响。
2. **非归零编码**(NRZ)：与 RZ 编码的方式就是不用归零，一个时钟全部用于传输数据，编码效率最高，但是收发双方存在同步问题，需要双方都带有时钟线。非归零编码是最朴素的编码方式，不会浪费带宽，但是无法实现自同步。
3. **反向非归零编码**(NRZI)：用电平的跳变表示 0，电平保持不变表示 1。这种编码方法集成了前两种编码的优点，既能传输时钟信号，又能尽量不损失系统带宽。反向非归零编码可以借助冗余位实现自同步，但是会浪费一些带宽。*看起点位置，跳变为 0，不跳变为 1*。
4. **曼彻斯特编码**：每个码元的中间都发生电平跳变，电平跳变既作为时钟信号(用于同步)又作为数据信号。可用向下跳变表示 1，向上跳变表示 0。
5. **差分曼彻斯特编码**：每个码元的中间都发生电平跳变，与曼彻斯特编码不同的是，电平跳变仅表示时钟信号，不表示数据。数据的表示在于每个码元开始处是否有电平跳变，无跳变表示 1，有跳变表示 0。*差分曼彻斯特编码拥有更强的抗干扰能力*。

> [!tip] 跳 0 不跳 1 看起点。

> [!note]
> 曼彻斯特编码和差分曼彻斯特编码在每个码元的中间都发生电平跳变，相当于将一个码元一分为二，编码速率是码元速率的 2 倍，二者所占的频带宽度是原始基带宽度的 2 倍。标准以太网使用的就是曼彻斯特编码，而差分曼彻斯特编码则被广泛用于宽带高速网中。
>
> 前三种编码方式抗干扰能力较弱，而曼彻斯特编码和差分曼彻斯特编码的抗干扰能力较强。

### 模拟数据编码为数字信号

主要包含三个步骤，即采样、量化、编码，常用于对音频信号进行编码的 PCM 编码。
1. 采样是指对模拟信号进行周期性扫描，将时间上连续的信号变成时间上离散的信号。
2. 量化是指将采样得到的电平幅值按照一定的分级标度转换为对应的数值并取整，这样就将连续的电平幅值转换为了离散的数字量。
3. 编码是指将量化得到的离散整数转换为与之对应的二进制编码。

> [!definition|Definition] 采样定理(奈奎斯特定理)
> 在将模拟信号转换为数字信号时，假设原始信号中的最大频率为 $f$，那么采样率 $f_{\text{采样}}$ 必须大于或等于最大频率 $f$ 的 2 倍，才能保证采样后的数字信号完整保留模拟信号的信息。

### 数字数据调制为模拟信号

数字数据调制技术在发送段将数字信号转换为模拟信号，而在接收端将模拟信号还原为数字信号，分别对应于调制解调器的调制和解调过程。
1. **调幅**(AM)或**幅移键控**(ASK)。通过改变载波的振幅来表示数字信号 1 和 0。*例如，用有载波和无载波输出分别表示 1 和 0*。这种方式比较容易实现，但是抗干扰能力差。
2. **调频**(FM)或**频移键控**(FSK)。通过改变载波的频率来表示数字信号 1 和 0。*例如，用频率 $f_{1}$ 和频率 $f_{2}$ 分别表示 1 和 0*。这种方式容易实现，抗干扰能力强，目前应用广泛。
3. **调相**(PM)或**相移键控**(PSK)。通过改变载波的相位来表示数字信号 1 和 0，又分为绝对调相和相对调相。*例如，用相位 0 和 $\pi$ 分别表示 1 和 0，是一种绝对调相方式*。
4. **正交幅度调制**(QAM)。在频率相同的前提下，将 AM 与 PM 结合起来，形成叠加信号。设波特率为 $B$，采用 $m$ 个相位，每个相位有 $n$ 种振幅，则该 QAM 的数据传输速率 $R$ 为
$$
R=B\log_{2}(mn)\quad\text{(b/s)}
$$

> [!tip]
> 重点掌握正交幅度调制，即将 n 种幅值与 m 种相位结合起来，总共有 mn 种状态，其可以表示 $\log_{2}(mn)$ 个码元，如果每个码元可以表示 $B$ 个比特，则其数据传输速率就是 $B\log_{2}(mn)$。

> [!note]
> 调制前的数字信号称为**基带信号**。将数字信号调制为模拟信号进行传输是有必要的
> - 在一些介质中，只有模拟信号才能进行传输(如真空)
> - 模拟信号的抗干扰能力更强，因此更加适合远距离传输

### 模拟数据调制为模拟信号

为了实现数据传输的有效性，可能需要较高的频率。这种调制方式还可以使用频分复用(FDM)技术，充分利用带宽资源。电话机和本地局交换机采用模拟信号传输模拟数据的编码方式。

## 传输介质

传输介质也称传输媒体，是数据传输系统中发送器和接收器之间的物理通路。传输介质可分为
1. 导向传输介质，例如铜线、光纤等，电磁波在这种介质中被导向为沿着固体介质传播。
2. 非导向传输介质，指自由空间(空气、水)，电磁波在非导向传输介质中的传输称为无线处传输。

### 双绞线

双绞线是最常用的传输介质，在局域网和传统电话网中普遍使用。双绞线由两根采用一定规则并排绞合、相互绝缘的铜导线组成。绞合可以减少对相邻导线的电磁干扰，为了进一步提高抗电磁干扰的能力，还可以在双绞线的外面加上一层金属丝编织成的屏蔽层，称为**屏蔽双绞线&&**(STP)。无屏蔽层的双绞线称为**非屏蔽双绞线**(UTP)。

> [!note] 双绞线性质
> 双绞线价格便宜，模拟传输和数字传输都可以使用双绞线，通信距离一般为几千米到数十千米。双绞线的带宽取决于铜线的粗细和传输的距离。距离太远时，对于模拟传输，需要使用放大器放大衰减的信号；对于数字传输，要用中继器来对失真的信号进行整形。

### 同轴电缆

同轴电缆由内导体、绝缘体、网状编址屏蔽层和塑料外层构成。同轴电缆一般分为两类：
1. 50Ω 同轴电缆，主要用于传送基带数字信号，在早起局域网中应用广泛。
2. 75Ω 同轴电缆，主要用于传送宽带信号，在优先电视系统中应用广泛。

> [!note] 同轴电缆性质
> 因为有外代替屏蔽层的作用，所以同轴电缆具有良好的抗干扰特性，被广泛用于传输较高速率的数据。

### 光纤

光钎通信是指利用光导纤维(简称光纤)传递光脉冲来进行通信。有光脉冲表示 1，无光脉冲表示 0.可见光的频率约为 $10^{8}$ MHz，因此光纤通信系统的带宽极大。

光纤主要由纤芯和包层构成，纤芯很细，直径 8~100μm，包层较纤芯由较低的折射率，光波通过纤芯进行传导。当光线从高折射率的介质射向低折射率的介质时，其折射率将大于入射角。因此，只要入射角大于某个临界角时，就会出现全反射，即光线碰到包层时就会折射回线芯，这个过程不断重复，光也就沿着光纤传输下去。

利用光的全反射特性，可以让不同角度入射的多条光线在一根光纤中传输，这种光纤称为**多模光纤**，其光源为发光二极管。光脉冲在多模光纤中传输时逐渐展宽，造成失真，因此*多模光纤只适合近距离传输*。

当光纤的直径减少到只有一个光的波长时，光纤就像一根波导那样，可使光线一直向前传播，而不产生多次反射，这样的光纤就是**单模光纤**。单模光纤的纤芯很细，直径只有几微米，制造成本较高。同时，单模光纤的光源是定向性很好的半导体激光器，因此单模光纤的衰减较小，可传输几千米甚至数十千米不需要采用中继器，适合远距离传输。

> [!note] 光纤的特点
> 1. 传输损耗小，中继距离常，对远距离传输特别经济。
> 2. 抗雷电和电磁干扰性能好，在有大电流脉冲干扰的环境下这尤为重要。
> 3. 无串音干扰，保密性好，不易被窃听或截取数据。
> 4. 体积小，重量轻，在现有电缆管道以阻塞不堪的情况下这特别有利。

### 无线传播介质

无线通信已经广泛应用于蜂窝移动电话领域。随着便携式计算机的出现，以及军事、野外等特殊场合对移动联网的需要，促进了移动通信的发展，现在无线局域网的应用已经非常普遍。
1. 无线电波：无线电波具有较强的穿透能力，可以传播很长的距离，因此广泛应用于通信领域，如无线手机、计算机网络中的无线局域网(WLAN)等。
2. 微波、红外线、激光：目前高宽带的无线通信技术主要使用的三种技术，它们都需要在发送方和接收方之间有一条视线通路，有很强的方向性，沿直线传播。

## 物理层接口特性

物理层考虑的是如何在连接各种计算机的传输介质上传输比特流，而不指具体的传输介质。网络中硬件设备和传输介质的种类繁多，通信方式也各不相同。物理层应尽可能屏蔽这些差异，让数据链路层感觉不到这些差异，使数据链路层只需要考虑如何完成本层的协议和服务。

物理层的主要任务是确定传输介质和接口有关的一些特性：
1. **机械特性**：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
2. **电气特性**：指明在接口电缆的各条线上的电压范围、传输速率和距离限制等。
3. **功能特性**：指明某条线上出现的某一电平的电压的意义，以及每条线的功能。
4. **过程特性**：也称规程特性，指明对不同功能的各种可能事件的出现顺序。

## 物理层设备

### 中继器

中继器的主要功能是整形、放大并转发信号，以消除信号经过一长段电缆后产生的失真和衰减，使信号的波形和强度达到所需的要求，从而扩大网络传输的距离。其原理是==信号再生==(而非简单地放大衰减的信号)。中继器有两个端口，数据从一个端口输入，从另一个端口发出。端口仅作用于信号的电气部分，而不管是否有错误数据或不适于网段的数据。

> [!note]
> 1. 中继器是用来扩大网络规模的最简单的廉价互连设备。
> 2. 中继器两端的网络部分是网段，而不是子网。使用中继器连接的几个网段仍是一个局域网。
> 3. 中继器不能连接具有不同速率的局域网。

### 集线器

集线器(Hub)实质上是一个多端口的中继器，当 Hub 工作时，一个端口接收到数据信号后，因为信号在从端口到 Hub 的传输过程中已有衰减，所以 Hub 便对该信号进行整形放大，使之再生到发送时的状态，紧接着转发到其他所有处于工作状态的端口。

> [!note]
> 集线器不能分割冲突域，集线器的所有端口都属于同一冲突域。集线器在一个时钟周期内只能传输一组信息，当一条集线器连接的机器数目较多且多台机器经常需要同时通信时，将导致信息冲突，使得集线器的工作效率很差。

---
< [[计算机网络/计算机网络系统结构|计算机网络系统结构]] | [[计算机网络/数据链路层|数据链路层]] >
