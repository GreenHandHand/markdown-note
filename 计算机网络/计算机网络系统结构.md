---
tags:
  - 计算机网络
---

# 计算机网络体系结构

一般认为，计算机网络是一个将众多分散的、自治的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。

计算机网络由若干节点(node)和连接这些节点的链路(link)组成。网络中的节点可以是计算机、集线器、交换机或路由器等。网络之间还可以通过路由器互连，构成一个覆盖范围更广的计算机网络，这样的网络称为**互联网**(internet)。

于是，我们可以这样理解：网络把许多计算机连在一起，而互联网则把许多网络通过路由器连在一起。

> [!note] 
> - **internet**(互联网)：通用名词，泛指由多个计算机网络互连而成的计算机网络。在这些网络之间可以使用任意的通信协议作为通信规则。
> - **Internet**(因特网或互联网)：专用名词，指当前全球最大的、开放的、由众多网络和路由器互连而成的特定计算机网络，它采用 TCP/IP 协议作为通信规则。

## 计算机网络的组成

从不同的角度看，可以将计算机网络的组成分为以下几类：
1. 从组成部分看，计算机网络主要由硬件、软件、协议三大部分组成。
	- **硬件**：由主机(端系统)、通信链路(如双绞线、光纤)、交换设备(如路由器、交换机等)和通信处理机(网卡)等组成。
	- **软件**：包含各种实现资源共享的软件和方便用户使用的各种工具软件^[如 E-mail 程序、FTP 程序、聊天程序等]。
	- **协议**：计算机网络的核心，如同交通规则制约汽车驾驶一样，协议规定了网络传输数据时所遵守的规范。
2. 从工作方式来看，计算机网络可以分为边缘部分和核心部分。
	- **边缘部分**：由所有连接到互联网上的供用户直接使用的主机组成，用来进行通信和资源共享。
	- **核心部分**：由大量网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。
3. 从功能部件来看，计算机网络由通信子网和资源子网组成。
	- **通信子网**：由各种传输介质、通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力，实现联网计算机之间的数据通信。
	- **资源子网**：实现资源共享功能的设备及其软件的集合，由网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务。

## 计算机网络的功能

计算机网络主要有以下 5 大功能：
1. **数据通信**：计算机网络最基本和最重要的功能，用来实现联网计算机之间各种信息的传输，并联系分散在不同地理位置的计算机，进行同一的调配、控制和管理。
2. **资源共享**：资源共享即可是软件共享、数据共享，也可以是硬件共享。它使计算机网络中的资源互通有无，分工协作，从而极大的提供了硬件资源、软件资源和数据资源的利用率。
3. **分布式处理**：当计算机网络中的某个计算机负荷过重时，可以将其处理的某个复杂任务分配给网络中的其他计算机系统，从而利用空闲计算机资源来提高整个系统的利用率。
4. **提高可靠性**：计算机网络中的各台计算机可以通过网络互为替代机。
5. **负载均衡**：将工作任务均匀地分配给计算机网络中的各台计算机。

## 交换

在网络核心部分起重要作用的是**路由器**(router)，它对收到的分组进行存储转发来实现分组交换。从通信资源分配的角度看，交换就是按找某个方式动态地分配传输线路的资源。

### 电路交换

最典型的电路交换网是传统电话网，电路交换分为三步：连接建立、数据传输和连接释放。在进行数据传输前，两个节点之间必须先建立一条专用(双方独占)的物理通信路径，该路径可能经过许多中间节点。在数据传输过程中，这一物理通信路径始终被用户独占，直到通信结束后才被释放。

在电路交换的整个通信阶段，比特流连续地从源点直达终点，就好像在一个管道传送。

> [!note] 电路交换技术的特点
> - 优点：
> 	- **通信时延小**。通信线路双方专用，数据直达，所以传输时延非常小。
> 	- **有序传输**。双方通信时按发送顺序传送数据，不存在失序问题。
> 	- **没有冲突**。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。
> 	- **适用范围广**。电路交换既适用于传送模拟信号，又适用与传送数字信号。
> 	- **实时性强**。通信双方之间的物理通路一旦建立，双方就可以随时通信。
> 	- **控制简单**。电路交换的交换设备及其控制简单。
> - 缺点：
> 	- **建立连接时间长**。电路交换的平均连接时间对计算机通信来说太长了。
> 	- **线路利用率低**。物理通路被通信双方独占，即使线路空闲，也不能供其他用户使用。
> 	- **灵活性差**。物理通路中的任何一点出现故障，就必须重新拨号建立新的连接。
> 	- **难以规格化**。不同类型、不同规格、不同速率的终端很难相互通信。
> 	- **难以实现差错控制**。中间节点不具备存储和检验数据的能力，无法发现并纠正错误。

### 报文交换

数据交换的单位是报文。用户数据加上原地址、目的地址等信息后，封装为**报文**(message)。报文交换采用的是**存储转发技术**，整个报文线传送到相邻节点，全部存储后查找转发表，转发到下一个节点，如此重复，直到达到目的节点。每个报文都可以单独选择到达目的节点的路径。

> [!note] 报文交换的特点
> - 优点：
> 	- **无需建立连接通路**。通信前无须建立连接，没有建立连接时延，用户可以随时发送报文。
> 	- **动态分配路线**。交换设备存储整个报文后，选择一条合适的空闲线路，转发报文。
> 	- **线路可靠性高**。若某条传输路径发生故障，则可以重新选择另一条路径传输数据。
> 	- **线路利用率高**。报文在哪段链路上传送时才占用这段链路的通信资源。
> 	- **提供多目标服务**。一个报文可以同时发送给多个目的地址。
> - 缺点：
> 	- **转发时延高**。交换节点要将整个报文整体接收完后，才能查找转发表转发到下一个节点。
> 	- **缓存开销大**。报文的大小没有限制，这就要求交换节点拥有较大的缓冲空间。
> 	- **错误处理低效**。报文较长时，发生错误的概率相对较大，重传整个报文的代价也很大。

### 分组交换

分组交换也采用**存储转发技术**，但是解决了报文交换中的报文过长的问题。若报文太长，则对交换节点的缓存容量就有了很大的需求，在错误处理方面也比较低效。在分组交换中，源节点在发送前，先把较长的报文划分为若干较小的等长数据段，在每个数据段前面添加一些必要的控制信息^[如源地址、目的地址、编号信息等]组成的首部，构成**分组**(Packet)。

源节点将分组发送到分组交换网中，分组交换网中的分组交换机收到一个分组后，先将其缓存，然后从其首部中提取目的地址，据此查找自己的转发表，再后将分组转发给下一个分组交换机。经过多个分组交换机的存储转发后，分组最终到达目的节点。

> [!note] 分组交换的特点
> - 优点：
> 	- **无建立时延**。通信前无需建立连接，没有建立连接时延，用户可以随意发送分组。
> 	- **线路利用率高**。分组在哪条链路上传送时才占用这段链路的通信资源。相比采用电路交换数据突发式的计算机数据，分组交换的通信线路利用率大大提高。
> 	- **简化了存储管理**。相对于报文交换，分组的长度固定，相应的缓冲区大小也固定，在交换节点中存储器的管理通常被简化为对缓冲区的管理，相对较容易。
> 	- **加速传输**。分组是逐个传输的，可以使后一个分组的存储操作与前一个分组的转发操作并行，即[[计算机组成原理/中央处理器#指令流水线|流水线方式]]传输每个分组。此外，传输一个分组比传输一次报文所需的缓冲区小得多，这样，因缓冲区不足而等待发送的概率及时间也小得多。
> 	- **减小了出错的概率和重发数据量**。因为分组较短，其错误概率小，出错时重发数据量也少。这样不仅提高了可靠性，而且减少了传输时延。
> - 缺点：
> 	- **存在存储转发时延**。尽管分组交换比报文交换的传输时延小，但是相对与电路交换任存在存储转发时延，且其节点交换机必须具有更强的处理能力。
> 	- **需要传输额外的信息量**。每个小数据段都要加上控制信息以构成分组，这使得传送的信息量增大了 5%~10%，进而使得控制复杂，降低了通信效率，增大了处理的时延。
> 	- **可能出现失序、丢失或重复分组**的情况，分组到达节点时，要对分组按编号进行排序等工作，而这些工作比较麻烦。若采用虚电路服务，虽然没有失序问题，但是有呼叫建立，数据传输和虚电路释放三个过程。

当传输的数据量很大且其传送时间远大于呼叫时间时，采用电路交换较为合适。当端到端的通路由多段链路组成时，采用分组交换传送数据较为合适。

> [!example] 三种方式对比
> 